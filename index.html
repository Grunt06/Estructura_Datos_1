<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"> 
    <title>Taller_4</title>

</head>
<body>
    <script>


class Estudiante {
    constructor(id, nombre, fechaNacimiento, genero, asignaturas, cantidadAsignaturas, anoSemestre) {
      this.id = id;
      this.nombre = nombre;
      this.fechaNacimiento = fechaNacimiento;
      this.genero = genero;
      this.asignaturas = asignaturas;
      this.cantidadAsignaturas = cantidadAsignaturas;
      this.anoSemestre = anoSemestre;

    }
  
    static registros = [];
  
    static registrarEstudiante() {
      const id = parseInt(prompt("Ingrese la identificación del estudiante"));
      const nombre = prompt("Ingrese el nombre del estudiante");
      const fechaNacimiento = new Date(prompt("Ingrese la fecha de nacimiento del estudiante (YYYY-MM-DD)"));
      const genero = confirm("Seleccione el género del estudiante:\n\n- Aceptar para Masculino.\n- Cancelar para Femenino.");//prompt("Ingrese el sexo del estudiante -Masculino- -Femenino-");
      const cantidadAsignaturas = parseInt(prompt("Ingrese la cantidad de asignaturas que tiene el estudiante"));
      const asignaturas = [];
      for (let i = 0; i < cantidadAsignaturas; i++) {
        const asignatura = prompt(`Ingrese el nombre de la asignatura ${i + 1}`);
        asignaturas.push(asignatura);
      }
      const anoSemestre = parseInt(prompt("Ingrese el año-semestre del estudiante (1-2)"));
      
  
      const estudiante = new Estudiante(id, nombre, fechaNacimiento, genero, asignaturas, cantidadAsignaturas, anoSemestre);
      Estudiante.registros.push(estudiante);
      alert("El estudiante ha sido registrado exitosamente.");
    }


    static modificarRegistro() {
        const id = parseInt(prompt("Ingrese la identificación del estudiante que desea modificar"));
        const estudiante = Estudiante.registros.find((est) => est.id === id);
        if (estudiante) {
          estudiante.nombre = prompt("Ingrese el nuevo nombre del estudiante");
          estudiante.fechaNacimiento = new Date(prompt("Ingrese la nueva fecha de nacimiento del estudiante (YYYY-MM-DD)"));
          estudiante.genero = confirm("Seleccione el género del estudiante:\n\n- Aceptar para Masculino.\n- Cancelar para Femenino.");;
          const cantidadAsignaturas = parseInt(prompt("Ingrese la cantidad de asignaturas que tiene el estudiante"));
          estudiante.asignaturas = [];
          for (let i = 0; i < cantidadAsignaturas; i++) {
            const asignatura = prompt(`Ingrese el nombre de la asignatura ${i + 1}`);
            estudiante.asignaturas.push(asignatura);
          }
          estudiante.anoSemestre = parseInt(prompt("Ingrese el nuevo año-semestre del estudiante (1-2)"));
   
          alert("El registro ha sido modificado exitosamente.");
        } else {
          alert("No se encontró un estudiante con la identificación ingresada.");
        }
      }



      static eliminarRegistro() {
        const id = parseInt(prompt('Ingrese la identificación del estudiante a eliminar'));
        const index = Estudiante.registros.findIndex(estudiante => estudiante.id === id);
        if (index !== -1) {
          Estudiante.registros.splice(index, 1);
          alert('El estudiante ha sido eliminado exitosamente');
        } else {
          alert('No se encontró ningún estudiante con la identificación ingresada');
        }
      }



    /*static consultarRegistros(){
        let registros = "";
        for (const estudiante of Estudiante.registros) {
        registros += `\nIdentificacion: ${Estudiante.registros.id} | Nombre: ${Estudiante.registros.nombre} | Fecha de Nacimiento: ${Estudiante.registros.fechaNacimiento.toLocaleDateString()} | Género: ${Estudiante.registros.genero ? 'Femenino' : 'Masculino'} | Cantidad de Asignaturas: ${Estudiante.registros.cantidadAsignaturas}| Asignaturas: ${Estudiante.registros.asignaturas.join}  | Año-Semestre: ${Estudiante.registros.anoSemestre}\n\n`;
        }
        alert(registros)
    }
*/
  
    static consultarRegistros() {
      let registros = "";
      for (const estudiante of Estudiante.registros) {
        registros += `\n-------Informacion del Estudiante-------\nIdentificación: ${estudiante.id}\nNombre: ${estudiante.nombre}\nFecha de nacimiento: ${estudiante.fechaNacimiento.toDateString()}\nGenero: ${estudiante.genero ? "Masculino" : "Femenino"}\nAsignaturas: ${estudiante.asignaturas.join(", ")}\nAño-Semestre: ${estudiante.anoSemestre}\n\n`;
      }
      alert(registros);
    }
  
  /*  function mostrarelregistro() {
        let lista = "Código\tNombre\tReferencia\n";
        electrodomesticos.forEach((element) => {
        lista += `${element[0]}\t${element[1]}\t${element[2]}\n`;
        });
        alert(lista);
        }
*/        

    
    static ordenarPorNombre() {
        let incremento = Estudiante.registros.length / 2;
        while (incremento > 0) {
          for (let i = incremento; i < Estudiante.registros.length; i++) {
            let j = i;
            let temp = Estudiante.registros[i];
            while (j >= incremento && Estudiante.registros[j - incremento].nombre > temp.nombre) {
                Estudiante.registros[j] = Estudiante.registros[j - incremento];
              j -= incremento;
            }
            Estudiante.registros[j] = temp;
          }
          incremento = incremento == 2 ? 1 : parseInt(incremento * 5 / 11);
        }
        alert('Los registros han sido ordenados por nombre exitosamente');
      }


      static buscarPorFechaNacimiento() {
        const fecha = new Date(prompt('Ingrese la fecha de nacimiento del estudiante a buscar (formato: (YYYY-MM-DD))'));
        let inicio = 0;
        let fin = Estudiante.registros.length - 1;
        let encontrado = false;
        let indexEncontrado = -1;
        while (inicio <= fin && !encontrado) {
          const medio = parseInt((inicio + fin) / 2);
          if (Estudiante.registros[medio].fechaNacimiento.getTime() == fecha.getTime()) {
            encontrado = true;
            indexEncontrado = medio;
          } else if (Estudiante.registros[medio].fechaNacimiento.getTime() > fecha.getTime()) {
            fin = medio - 1;
          } else {
            inicio = medio + 1;
          }
        }
        if (encontrado) {
          alert(`El estudiante con fecha de nacimiento ${fecha.toLocaleDateString()} fue encontrado en el registro con los siguientes datos:\nIdentificacion: ${Estudiante.registros[indexEncontrado].id} | Nombre: ${Estudiante.registros[indexEncontrado].nombre} | Fecha de Nacimiento: ${Estudiante.registros[indexEncontrado].fechaNacimiento.toLocaleDateString()} | Género: ${Estudiante.registros[indexEncontrado].genero ? 'Femenino' : 'Masculino'} | Asignatura: ${Estudiante.registros[indexEncontrado].asignatura} | Cantidad de Asignaturas: ${Estudiante.registros[indexEncontrado].cantidadAsignaturas} | Año-Semestre: ${Estudiante.registros[indexEncontrado].anoSemestre}`);
        } else {
          alert(`No se encontró ningún estudiante con fecha de nacimiento ${fecha.toLocaleDateString()}`);
        }
    }    

    static mostrarMenu() {
      let opcion = "";
      while (opcion !== "7") {
        opcion = prompt("Seleccione una opción:\n1. Registrar Estudiante\n2. Modificar Registro\n3. Eliminar Registro\n4. Consultar Registros\n5. Ordenamiento por Shell\n6. Busqueda Binaria\n7. Salir");
        switch (opcion) {
          case "1":
            Estudiante.registrarEstudiante();
            break;
          case "2":
            Estudiante.modificarRegistro();
            break;
          case "3":
            Estudiante.eliminarRegistro();
            break;
          case "4":
            Estudiante.consultarRegistros();
            break;
          case "5":
            Estudiante.ordenarPorNombre();
            break;
          case "6":
            Estudiante.buscarPorFechaNacimiento();
            break;
          case "7":
            alert("¡Hasta luego!");
            break;
          default:
            alert("Opción inválida, seleccione nuevamente.");
            break;
        }
      }
    }
  }
  
  Estudiante.mostrarMenu();

    </script>

</body>

</html>
